{% extends 'background/base.html' %}

{% block head %}
  {{ super() }}
  <link href="/static/libs/editor.md/css/editormd.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
  <div class="publish mt-2">
    <form method="post" action="/background/publish/">
      <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
      <div class="form-group">
        <div class="input-group">
          <div class="input-group-prepend w-25">
            <select id="article-type" name="article_type" class="form-control">
              {% for type in article_types %}
                <option value="{{ type.id }}">{{ type.name }}</option>
              {% endfor %}
            </select>
          </div>
          <input type="text" id="title" name="title" class="form-control" placeholder="Title">
        </div>
      </div>
      <div class="form-group">
        <div id="my-editormd" class="m-0 w-100">
          <textarea id="content" name="content" style="display:none;"></textarea>
        </div>
      </div>
      <div class="col-auto pull-right">
        <button id="submit" type="submit" class="btn btn-primary mb-2">Submit</button>
      </div>
    </form>
  </div>
{% endblock %}

{% block script %}
  {{ super() }}
  <script src="/static/libs/editor.md/editormd.min.js"></script>
  <script>
      function set_markdown() {
          editormd("my-editormd", {
              width: "90%",
              height: 640,
              syncScrolling: "single",
              path: "/static/libs/editor.md/lib/",
              saveHTMLToTextarea: true
          });
      }

      $(function () {
          set_markdown();
      })
  </script>
{% endblock %}